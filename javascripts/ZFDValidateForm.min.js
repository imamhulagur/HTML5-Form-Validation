(function(e,c,a,g){if(!e.ZFD){e.ZFD={}}if(!e.ZFD.ValidateForm){e.ZFD.ValidateForm={}}var d=e.ZFD.ValidateForm;var f=false,b=false;e.fn.ZFValidateForm=function(p){var z={defaultErrorMessage:"* Incorrect input",errorClassName:"error",errorWrapToggleClass:"showError",singleErrorContainer:".formValidationError",useSingleErrorContainer:false,useCustomErrorContainer:false,errorInsertBeforeField:false,hideErrorOnClearedInput:true,disableBrowserValidation:true,validateOnKeyup:false,validateOnBlur:false,validateOnChange:true,validateOnLoad:false,validateInputType:false,validateCustomRules:true,onDemandValidate:false,onFieldValid:function(){},onFieldNotValid:function(){},onFormValid:function(){},onFormInvalid:function(){},minLength:1,maxLength:256,minLengthAttribute:"data-minlength",minLengthMessage:"data-minlength-message",maxLengthMessage:"data-maxlength-message",requiredMessage:"data-required-message",patternMessage:"data-pattern-message",matchAttribute:"data-match-field",matchMessage:"data-match-message",isIE:new RegExp("MSIE|Trident").test(navigator.userAgent),debugMode:false,debugOutput:function(Q,P,O,R,o){e.error("\n\tZFValidateForm DebugMode log:  \n\t\t Event: "+Q+" validation \n\t\t Element: "+P+" \n\t\t Field validity: "+O+" \n\t\t Error message: "+R)}};var G=d.options=e.extend({},z,p);var j,B,H,F,l,N,w,K=this,L=t(),i=(L)?K:(G.validateInputType)?K.find(":input"):K.find("[required]"),I=i.length,E=(K.is("form"))?K:K.parents("form");function M(O){var o=(e(O).attr("id")!==g&&e(O).attr("id").length>0)?e(O).attr("id"):e(O).attr("name");return o}function t(){var o=true;K.each(function(){o=(e(this).is(":input"))?o:false});return o}var q=function(T,P,V,S){var O=V.replace(/^\.{0,1}/g,""),o=['<span class="',O," ",T,'">',S,"</span>"].join("");if(G.useCustomErrorContainer&&e("#"+T).data("error-container")!==g){var R=e("#"+T).data("error-container"),Q=e(R).children("."+T);if(Q.length>0){Q.text(S).show()}else{e(R).append(o)}e(R).addClass(G.errorWrapToggleClass).show()}else{if(G.useSingleErrorContainer){var U=e(G.singleErrorContainer).children("."+T);if(U.length>0){e(U).text(S).show()}else{e(G.singleErrorContainer).append(o)}e(G.singleErrorContainer).addClass(G.errorWrapToggleClass).show()}else{if(P.children(V).length>0){P.addClass(G.errorWrapToggleClass).children(V).html(S).show()}else{P.addClass(G.errorWrapToggleClass);if(G.errorInsertBeforeField){e(o).insertBefore("#"+T).show()}else{e(o).insertAfter("#"+T).show()}}}}},v=function(O,P,S){if(G.useCustomErrorContainer&&e("#"+O).data("error-container")!==g){var Q=e("#"+O).data("error-container"),R=e(Q).children("."+O);if(R.length>0){R.hide();if(e(Q).find("."+G.errorClassName+":visible").length===0){e(Q).removeClass(G.errorWrapToggleClass).hide()}}}else{if(G.useSingleErrorContainer){var o=e(G.singleErrorContainer).children("."+O);if(o.length>0){o.hide();if(e(G.singleErrorContainer).find("."+G.errorClassName+":visible").length===0){e(G.singleErrorContainer).removeClass(G.errorWrapToggleClass).hide()}}}else{P.removeClass(G.errorWrapToggleClass).children(S).hide()}}},x=function(){var o=e(j).attr(G.requiredMessage),O=(o!==g&&o.length>0)?o:G.defaultErrorMessage;if(j.willValidate&&j.validity.valueMissing&&!(G.isIE&&j.nodeName==="SELECT")){b=false;q(B,H,N,O)}else{if(l===0){b=false;q(B,H,N,O)}else{b=true;v(B,H,N)}}},D=function(){var P=e(j).attr(G.minLengthAttribute),o=(P&&P.length>0)?P:G.minLength,Q=e(j).attr(G.minLengthMessage),O=(Q!==g&&Q.length>0)?Q:G.defaultErrorMessage;if(G.debugMode){G.debugOutput("Minimum Length value: "+o,B,b,O)}if(j.willValidate&&j.validity.rangeUnderflow){b=false;q(B,H,N,O)}else{if(l<o){b=false;q(B,H,N,O)}else{b=true;v(B,H,N)}}},C=function(){var P=e(j).attr("maxlength"),o=(P&&P.length>0)?P:G.maxLength,Q=e(j).attr(G.maxLengthMessage),O=(Q!==g&&Q.length>0)?Q:G.defaultErrorMessage;if(G.debugMode){G.debugOutput("Maximum Length value: "+P,B,b,O)}if(j.willValidate&&j.validity.rangeOverflow){b=false;q(B,H,N,O)}else{if(l>o){b=false;q(B,H,N,O)}else{b=true;v(B,H,N)}}},y=function(){var O=e(j).attr(G.patternMessage),P=(O!==g&&O.length>0)?O:G.defaultErrorMessage;if(j.willValidate){if(j.validity.patternMismatch){b=false;q(B,H,N,P);if(G.debugMode){G.debugOutput("Pattern check (Native). \n\t\t Pattern: "+e(j).attr("pattern"),B,b,P)}}}else{var o=e(j).attr("pattern"),Q=(o&&o.length>0)?o:null;if(Q!==null){if(new RegExp(Q).test(F)){b=true;v(B,H,N)}else{b=false;q(B,H,N,P)}if(G.debugMode){G.debugOutput("Pattern check (OLD). \n\t\t Pattern: "+Q,B,b,P)}}}},u=function(){var O=e(j),o=O.attr(G.matchAttribute),Q=O.attr(G.matchMessage),P=(Q!==g&&Q.length>0)?Q:G.defaultErrorMessage;if(e(o).val()===O.val()){b=true;v(B,H,N)}else{b=false;q(B,H,N,P)}if(G.debugMode){G.debugOutput("Match values. \n\t\t Validated value: "+O.val()+"\n\t\t To match: "+e(o).val(),M(j),b,P)}};var h=d.validateField=function(o,O,P){b=true;j=o,B=M(j),H=e(j).parent(),F=e(j).val(),l=F.length,N=(O===g)?"."+G.errorClassName:O;if(e(j).attr("required")!==g&&e(j).attr("required")!==false){x()}if(b&&e(j).attr(G.minLengthAttribute)!==g){D()}if(b&&(e(j).attr("maxlength")!==g&&e(j).attr("maxlength")!==-1)){C()}if(b&&e(j).attr("pattern")!==g&&e(j).attr("pattern").length>0){y()}if(b&&e(j).attr(G.matchAttribute)!==g&&e(j).attr(G.matchAttribute).length>0){u()}if(G.validateCustomRules){if(b&&e(j).data("customValidity")==="expiryDate"){m(j)}}if(e.isFunction(P)){P(b)}if(G.debugMode){G.debugOutput("Method: 'validateField'",B,b,e(N).text())}return b};function s(o){i.unbind(o+".ZFValidateForm");i.bind(o+".ZFValidateForm",function(O){var P=O.target;if(G.hideErrorOnClearedInput&&e(P).val().length===0){v(M(P),e(P).parent(),"."+G.errorClassName)}else{h(P)}if(b&&e.isFunction(G.onFieldValid)){G.onFieldValid(P)}if(!b&&e.isFunction(G.onFieldNotValid)){G.onFieldNotValid(P)}if(G.debugMode){G.debugOutput(o,M(P),b,e("."+G.errorClassName).text())}})}if(G.validateOnKeyup){w="keyup";s(w)}if(G.validateOnBlur&&!G.validateOnKeyup){w="blur";s(w)}if(G.validateOnChange&&!G.validateOnBlur&&!G.validateOnKeyup){w="change";s(w)}var r=d.validateForm=function(){w="submit";f=true;for(var o=0;o<I;o+=1){h(i[o]);f=(b)?f:false}if(f&&e.isFunction(G.onFormValid)){G.onFormValid()}if(!f&&e.isFunction(G.onFormInvalid)){G.onFormInvalid()}if(G.debugMode){alert("Form validity: "+f)}return f};E.submit(function(o){o.preventDefault();r();if(f){o.target.submit()}else{return false}});if(G.disableBrowserValidation){var k=(E)?E:"";e(k+"[type=submit]").attr("formnovalidate","")}var J=new Date(),A=new Date(),n={Year:"data-expiry-year",Month:"data-expiry-month",Day:"data-expiry-day",requiredMessage:"data-required-message",expiredMessage:"data-expired-message"};function m(O,Q){var P=(Q===g)?{}:Q;for(var T in n){if(P[T]===g){P[T]=n[T]}}var R=(P.requiredMessage!==g&&P.requiredMessage.length>0)?e(O).attr(P.requiredMessage):G.defaultErrorMessage,S=(P.expiredMessage!==g&&P.expiredMessage.length>0)?e(O).attr(P.expiredMessage):G.defaultErrorMessage,V=function(aa,ab){var Z=g;if(aa!==g){var Y=e(O).attr(aa);if(e.isNumeric(aa)){Z=parseInt(aa,10)}else{if(Y!==g&&Y.length>0){if(e.isNumeric(Y)){Z=parseInt(Y,10)}else{if(e(Y).length>0&&e.isNumeric(e(Y).val())){Z=parseInt(e(Y).val(),10)}}}}}if(Z!==g){if(ab==="year"&&Z.toString().length===2){Z+=2000}else{if(ab==="month"){if(Z<1||Z>12){Z=g}else{Z-=1}}else{if(ab==="day"){if(Z<1||Z>31){Z=g}}}}}return Z},U=function(){var Y=new Date(X,W+1,0);return Y.getDate()},X=V(P.Year,"year"),W=V(P.Month,"month"),o=V(P.Day,"day");if(X===g||W===g){b=false;if(G.hideErrorOnClearedInput&&(w==="keyup"||w==="change"||w==="blur")){v(B,H,N)}else{q(B,H,N,R)}}else{if(o===g){o=U()}A.setFullYear(X,W,o);if(J<A){b=true;v(B,H,N)}else{b=false;q(B,H,N,S)}}if(G.debugMode){G.debugOutput("Expiry Date. \n\t\tToday: "+J+"\nExpiry Date: "+A,M(O),b,S)}}if(G.onDemandValidate){d.onDemandValidate=function(P){var o={beforeValidation:false,isValid:false,notValid:false,doSubmit:false},O=e.extend(o,P);if(e.isFunction(O.beforeValidation)){O.beforeValidation()}r();if(f&&e.isFunction(O.isValid)){O.isValid();if(O.doSubmit){E.submit()}}if(!f&&e.isFunction(O.notValid)){O.notValid()}if(G.debugMode){G.debugOutput("Method: 'onDemandValidate' ",M(E),f,"Invalid Fields error messages")}return f}}d.destroy=function(){setTimeout(function(){var O=["keyup","blur","change"];for(var o in O){i.unbind(O[o]+".ZFValidateForm")}E.unbind("submit.ZFValidateForm")},500);if(G.debugMode){e.error("ZFValidateForm Destroy call!")}};return i}})(jQuery,window,document);
